{% extends 'base.html' %}
{% load static %}
{% block content %}


<body>
    
    <!-- Header with Button -->
    <div class="commissions-header">
        <h1>Commission List</h1>
        <div class="commissions-create-button">
            <a href="{% url 'commissions:commission_create' %}">
            Create a new commission</a>
        </div>
    </div>

{% if user.is_authenticated %}
    <h2>Your applications</h2>
    <ul>
        {% for application in applications %}
            {% if application.applicant != request.user.profile %}
            <a class="commission-link" href="{% url 'commissions:commission_detail' application.job.commission.pk %}">

                <li class="commission">
                    <div class="commission-info">
                        <h3 class="commission-name">{{ application.job.commission.title }}</h3>
                        <div class="commission-author">Submitted by <strong>{{ application.job.commission.author }}</strong></div>
                        <div class="commission-author">Status: <strong>{{ commission.status }}</strong></div>

                        <div class="commission-stats">
                            <p><span class="commission-label stat">Updated On: </span>{{ application.job.commission.updated_on }}</p>
                            <p><span class="commission-label stat">Created On: </span>{{ application.job.commission.created_on }}</p>
                        </div>
                    </div>
                </li>

            </a>
            {% endif %}
        {% endfor %}
    </ul>
    
    <!-- Submitted by User -->
    <h2>Your submissions</h2>
    <ul>
        {% for commission in commissions %}
            {% if commission.author == request.user.profile %}
                <a class="commission-link" href="{% url 'commissions:commission_detail' commission.pk %}">
                    <li class="commission">
                        <div class="commission-info">
                            <h3 class="commission-name">{{ commission.title }}</h3>
                            <div class="commission-author">Author: <strong>{{ commission.author }}</strong></div>
                            <div class="commission-author">Status: <strong>{{ commission.status }}</strong></div>

                            <div class="commission-stats">

                                <p><span class="commission-label stat">Updated On: </span>{{ commission.updated_on }}</p>
                                <p><span class="commission-label stat">Created On: </span>{{ commission.created_on }}</p>
                            </div>
                        </div>
                    </li>
                </a>
            {% endif %}
        {% endfor %}
    </ul>

{% endif %}

<hr>

    <!-- All commissions -->
<h2>All Commissions</h2>
    <ul class="commissions-section">
        {% for commission in commissions %}
            <a class="commission-link" href="{% url 'commissions:commission_detail' commission.pk %}">
                
                <li class="commission">
                    <div class="commission-info">
                        <h3 class="commission-name">{{ commission.title }}</h3>
                        <div class="commission-author">Submitted by <strong>{{commission.author}}</strong></div>
                        <div class="commission-author">Status: <strong>{{ commission.status }}</strong></div>

                        <div class="commission-stats">
                            <p><span class="commission-label stat">Updated On: </span>{{ commission.updated_on }}</p>
                            <p><span class="commission-label stat">Created On: </span>{{ commission.created_on }}</p>
                        </div>
                    </div>
                
                </li>
            </a>
        {% empty %}
            <li class="no-comment">No commissions available.</li>
        {% endfor %}
    </ul>
</body>
</html>
{% endblock %}
